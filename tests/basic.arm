input namePrefix string

resource azrm 'network/virtualNetworks/subnets@2019-11-01' test {
    name: concat(namePrefix, '-subnet')
}

resource azrm 'network/networkInterfaces@v2019-11-01' nic {
    name: concat(namePrefix, '-nic')
    properties: {
        ipConfigurations: {
            name: 'myConfig'
            properties: {
                subnet: {
                    id: resourceId(test)
                }
                privateIPAllocationMethod: 'Dynamic'
            }
        }
    }
}

resource azrm 'network/publicIpAddresses@2019-11-01' pip {
    name: concat(namePrefix, '-pip')
    properties: {
    }
}

output nicResourceId resourceId(nic)